{"ast":null,"code":"import _objectSpread from\"C:\\\\Users\\\\Daniel Lepe Vega\\\\Documents\\\\Cisco\\\\Cisco-Simualtion\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/objectSpread2\";import _regeneratorRuntime from\"C:\\\\Users\\\\Daniel Lepe Vega\\\\Documents\\\\Cisco\\\\Cisco-Simualtion\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/regenerator\";import _asyncToGenerator from\"C:\\\\Users\\\\Daniel Lepe Vega\\\\Documents\\\\Cisco\\\\Cisco-Simualtion\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/asyncToGenerator\";import _slicedToArray from\"C:\\\\Users\\\\Daniel Lepe Vega\\\\Documents\\\\Cisco\\\\Cisco-Simualtion\\\\frontend\\\\node_modules\\\\babel-preset-react-app\\\\node_modules\\\\@babel\\\\runtime/helpers/esm/slicedToArray\";import React,{useState,useEffect}from\"react\";import TextField from\"@material-ui/core/TextField\";import Button from\"@material-ui/core/Button\";import SaveIcon from\"@material-ui/icons/Save\";import{makeStyles}from\"@material-ui/core/styles\";import Title from\"./Title\";var useStyles=makeStyles(function(theme){return{root:{\"& .MuiTextField-root\":{margin:theme.spacing(1),width:\"25ch\"}}};});export default function FormPropsTextFields(_ref){var match=_ref.match;var classes=useStyles();var _useState=useState(null),_useState2=_slicedToArray(_useState,2),error=_useState2[0],setError=_useState2[1];var _useState3=useState({numberID:null,impactedUser:\"\",subclass:\"\",category:\"\",state:\"\",summary:\"\",causingCI:\"\",assignedTo:\"\",openDate:\"\",assignedDate:\"\",resolutionDate:\"\",closedDate:\"\",scalationDate:\"\",notes:\"\"}),_useState4=_slicedToArray(_useState3,2),ticket=_useState4[0],setTicket=_useState4[1];var fetchTicket=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime.mark(function _callee(){var data,item;return _regeneratorRuntime.wrap(function _callee$(_context){while(1){switch(_context.prev=_context.next){case 0:_context.prev=0;_context.next=3;return fetch(\"http://localhost:8000/api/tickets/\".concat(match.params.id));case 3:data=_context.sent;_context.next=6;return data.json();case 6:item=_context.sent;console.log(item);setTicket({numberID:item.numberID,impactedUser:item.impactedUser,subclass:item.subclass,category:item.category,state:item.state,summary:item.summary,causingCI:item.causingCI,assignedTo:item.assignedTo,openDate:item.openDate,assignedDate:item.assignedDate,resolutionDate:item.resolutionDate,closedDate:item.closedDate,scalationDate:item.scalationDate,notes:item.notes});console.log(ticket);_context.next=15;break;case 12:_context.prev=12;_context.t0=_context[\"catch\"](0);setError(error);case 15:case\"end\":return _context.stop();}}},_callee,null,[[0,12]]);}));return function fetchTicket(){return _ref2.apply(this,arguments);};}();useEffect(function(){fetchTicket();},[]);function getCookie(name){var cookieValue=null;if(document.cookie&&document.cookie!==\"\"){var cookies=document.cookie.split(\";\");for(var i=0;i<cookies.length;i++){var cookie=cookies[i].trim();if(cookie.substring(0,name.length+1)===name+\"=\"){cookieValue=decodeURIComponent(cookie.substring(name.length+1));break;}}}return cookieValue;}var handleSubmit=function handleSubmit(e){e.preventDefault();if(!ticket.numberID)return;console.log(JSON.stringify(ticket));var csrftoken=getCookie(\"csrftoken\");var url=\"\";if(error){url=\"http://localhost:8000/api/tickets/\";}else{url=\"http://localhost:8000/api/tickets/\".concat(match.params.id,\"/\");}console.log(url);fetch(url,{method:\"POST\",headers:{\"Content-type\":\"application/json\",\"X-CSRFToken\":csrftoken},body:JSON.stringify(ticket)}).then(function(response){setTicket({});console.log(JSON.stringify(ticket));}).catch(function(error){console.log(\"ERROR:\",error);});setTicket({numberID:null,impactedUser:\"\",subclass:\"\",category:\"\",state:\"\",summary:\"\",causingCI:\"\",assignedTo:\"\",openDate:\"\",assignedDate:\"\",resolutionDate:\"\",closedDate:\"\",scalationDate:\"\",notes:\"\"});};return/*#__PURE__*/React.createElement(React.Fragment,null,/*#__PURE__*/React.createElement(Title,null,\"Store Ticket\"),/*#__PURE__*/React.createElement(\"form\",{className:classes.root,noValidate:true,autoComplete:\"off\",onSubmit:handleSubmit},/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(TextField,{required:true,id:\"number-id\",label:\"Number ID\",value:ticket.numberID,onChange:function onChange(e){setTicket(_objectSpread(_objectSpread({},ticket),{},{numberID:e.target.value}));}}),/*#__PURE__*/React.createElement(TextField,{id:\"impactedUser\",label:\"Impacted User\",value:ticket.impactedUser,onChange:function onChange(e){setTicket(_objectSpread(_objectSpread({},ticket),{},{impactedUser:e.target.value}));}}),/*#__PURE__*/React.createElement(TextField,{id:\"subclass\",label:\"Subclass\",value:ticket.subclass,onChange:function onChange(e){setTicket(_objectSpread(_objectSpread({},ticket),{},{subclass:e.target.value}));}}),/*#__PURE__*/React.createElement(TextField,{id:\"category\",label:\"Category\",value:ticket.category,onChange:function onChange(e){setTicket(_objectSpread(_objectSpread({},ticket),{},{category:e.target.value}));}}),/*#__PURE__*/React.createElement(TextField,{id:\"state\",label:\"State\",value:ticket.state,onChange:function onChange(e){setTicket(_objectSpread(_objectSpread({},ticket),{},{state:e.target.value}));}}),/*#__PURE__*/React.createElement(TextField,{id:\"summary\",label:\"Summary\",value:ticket.summary,onChange:function onChange(e){setTicket(_objectSpread(_objectSpread({},ticket),{},{summary:e.target.value}));}}),/*#__PURE__*/React.createElement(TextField,{id:\"causingCI\",label:\"Causing CI\",value:ticket.causingCI,onChange:function onChange(e){setTicket(_objectSpread(_objectSpread({},ticket),{},{causingCI:e.target.value}));}}),/*#__PURE__*/React.createElement(TextField,{id:\"assignedTo\",label:\"Assigned to\",value:ticket.assignedTo,onChange:function onChange(e){setTicket(_objectSpread(_objectSpread({},ticket),{},{assignedTo:e.target.value}));}}),/*#__PURE__*/React.createElement(TextField,{id:\"openDate\",label:\"Open date\",value:ticket.openDate,helperText:\"AAAA-MM-DD\",onChange:function onChange(e){setTicket(_objectSpread(_objectSpread({},ticket),{},{openDate:e.target.value}));}}),/*#__PURE__*/React.createElement(TextField,{id:\"assignedDate\",label:\"Assigned date\",value:ticket.assignedDate,helperText:\"AAAA-MM-DD\",onChange:function onChange(e){setTicket(_objectSpread(_objectSpread({},ticket),{},{assignedDate:e.target.value}));}}),/*#__PURE__*/React.createElement(TextField,{id:\"resolutionDate\",label:\"Resolution date\",value:ticket.resolutionDate,helperText:\"AAAA-MM-DD\",onChange:function onChange(e){setTicket(_objectSpread(_objectSpread({},ticket),{},{resolutionDate:e.target.value}));}}),/*#__PURE__*/React.createElement(TextField,{id:\"closedDate\",label:\"Closed date\",value:ticket.closedDate,helperText:\"AAAA-MM-DD\",onChange:function onChange(e){setTicket(_objectSpread(_objectSpread({},ticket),{},{closedDate:e.target.value}));}}),/*#__PURE__*/React.createElement(TextField,{id:\"scalationDate\",label:\"Scalation date\",value:ticket.scalationDate,helperText:\"AAAA-MM-DD\",onChange:function onChange(e){setTicket(_objectSpread(_objectSpread({},ticket),{},{scalationDate:e.target.value}));}}),/*#__PURE__*/React.createElement(TextField,{id:\"notes\",label:\"Notes\",value:ticket.notes,onChange:function onChange(e){setTicket(_objectSpread(_objectSpread({},ticket),{},{notes:e.target.value}));}})),/*#__PURE__*/React.createElement(\"div\",null,/*#__PURE__*/React.createElement(Button,{variant:\"contained\",color:\"primary\",type:\"submit\",startIcon:/*#__PURE__*/React.createElement(SaveIcon,null)},\"Save\"))));}","map":{"version":3,"sources":["C:/Users/Daniel Lepe Vega/Documents/Cisco/Cisco-Simualtion/frontend/src/components/InputTicket.js"],"names":["React","useState","useEffect","TextField","Button","SaveIcon","makeStyles","Title","useStyles","theme","root","margin","spacing","width","FormPropsTextFields","match","classes","error","setError","numberID","impactedUser","subclass","category","state","summary","causingCI","assignedTo","openDate","assignedDate","resolutionDate","closedDate","scalationDate","notes","ticket","setTicket","fetchTicket","fetch","params","id","data","json","item","console","log","getCookie","name","cookieValue","document","cookie","cookies","split","i","length","trim","substring","decodeURIComponent","handleSubmit","e","preventDefault","JSON","stringify","csrftoken","url","method","headers","body","then","response","catch","target","value"],"mappings":"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","sourcesContent":["import React, { useState, useEffect } from \"react\";\r\nimport TextField from \"@material-ui/core/TextField\";\r\nimport Button from \"@material-ui/core/Button\";\r\nimport SaveIcon from \"@material-ui/icons/Save\";\r\nimport { makeStyles } from \"@material-ui/core/styles\";\r\nimport Title from \"./Title\";\r\nconst useStyles = makeStyles((theme) => ({\r\n  root: {\r\n    \"& .MuiTextField-root\": {\r\n      margin: theme.spacing(1),\r\n      width: \"25ch\",\r\n    },\r\n  },\r\n}));\r\nexport default function FormPropsTextFields({ match }) {\r\n  const classes = useStyles();\r\n  const [error, setError] = useState(null);\r\n  const [ticket, setTicket] = useState({\r\n    numberID: null,\r\n    impactedUser: \"\",\r\n    subclass: \"\",\r\n    category: \"\",\r\n    state: \"\",\r\n    summary: \"\",\r\n    causingCI: \"\",\r\n    assignedTo: \"\",\r\n    openDate: \"\",\r\n    assignedDate: \"\",\r\n    resolutionDate: \"\",\r\n    closedDate: \"\",\r\n    scalationDate: \"\",\r\n    notes: \"\",\r\n  });\r\n\r\n  const fetchTicket = async () => {\r\n    try {\r\n      const data = await fetch(\r\n        `http://localhost:8000/api/tickets/${match.params.id}`\r\n      );\r\n      const item = await data.json();\r\n      console.log(item);\r\n      setTicket({\r\n        numberID: item.numberID,\r\n        impactedUser: item.impactedUser,\r\n        subclass: item.subclass,\r\n        category: item.category,\r\n        state: item.state,\r\n        summary: item.summary,\r\n        causingCI: item.causingCI,\r\n        assignedTo: item.assignedTo,\r\n        openDate: item.openDate,\r\n        assignedDate: item.assignedDate,\r\n        resolutionDate: item.resolutionDate,\r\n        closedDate: item.closedDate,\r\n        scalationDate: item.scalationDate,\r\n        notes: item.notes,\r\n      });\r\n      console.log(ticket);\r\n    } catch (err) {\r\n      setError(error);\r\n    }\r\n  };\r\n\r\n  useEffect(() => {\r\n    fetchTicket();\r\n  }, []);\r\n\r\n  function getCookie(name) {\r\n    var cookieValue = null;\r\n    if (document.cookie && document.cookie !== \"\") {\r\n      var cookies = document.cookie.split(\";\");\r\n      for (var i = 0; i < cookies.length; i++) {\r\n        var cookie = cookies[i].trim();\r\n        if (cookie.substring(0, name.length + 1) === name + \"=\") {\r\n          cookieValue = decodeURIComponent(cookie.substring(name.length + 1));\r\n          break;\r\n        }\r\n      }\r\n    }\r\n    return cookieValue;\r\n  }\r\n\r\n  const handleSubmit = (e) => {\r\n    e.preventDefault();\r\n\r\n    if (!ticket.numberID) return;\r\n\r\n    console.log(JSON.stringify(ticket));\r\n\r\n    var csrftoken = getCookie(\"csrftoken\");\r\n    var url = \"\";\r\n    if (error) {\r\n      url = \"http://localhost:8000/api/tickets/\";\r\n    } else {\r\n      url = `http://localhost:8000/api/tickets/${match.params.id}/`;\r\n    }\r\n    console.log(url);\r\n\r\n    fetch(url, {\r\n      method: \"POST\",\r\n      headers: {\r\n        \"Content-type\": \"application/json\",\r\n        \"X-CSRFToken\": csrftoken,\r\n      },\r\n      body: JSON.stringify(ticket),\r\n    })\r\n      .then((response) => {\r\n        setTicket({});\r\n        console.log(JSON.stringify(ticket));\r\n      })\r\n      .catch(function (error) {\r\n        console.log(\"ERROR:\", error);\r\n      });\r\n    setTicket({\r\n      numberID: null,\r\n      impactedUser: \"\",\r\n      subclass: \"\",\r\n      category: \"\",\r\n      state: \"\",\r\n      summary: \"\",\r\n      causingCI: \"\",\r\n      assignedTo: \"\",\r\n      openDate: \"\",\r\n      assignedDate: \"\",\r\n      resolutionDate: \"\",\r\n      closedDate: \"\",\r\n      scalationDate: \"\",\r\n      notes: \"\",\r\n    });\r\n  };\r\n\r\n  return (\r\n    <React.Fragment>\r\n      <Title>Store Ticket</Title>\r\n      <form\r\n        className={classes.root}\r\n        noValidate\r\n        autoComplete=\"off\"\r\n        onSubmit={handleSubmit}\r\n      >\r\n        <div>\r\n          <TextField\r\n            required\r\n            id=\"number-id\"\r\n            label=\"Number ID\"\r\n            value={ticket.numberID}\r\n            onChange={(e) => {\r\n              setTicket({ ...ticket, numberID: e.target.value });\r\n            }}\r\n          />\r\n          <TextField\r\n            id=\"impactedUser\"\r\n            label=\"Impacted User\"\r\n            value={ticket.impactedUser}\r\n            onChange={(e) => {\r\n              setTicket({ ...ticket, impactedUser: e.target.value });\r\n            }}\r\n          />\r\n          <TextField\r\n            id=\"subclass\"\r\n            label=\"Subclass\"\r\n            value={ticket.subclass}\r\n            onChange={(e) => {\r\n              setTicket({ ...ticket, subclass: e.target.value });\r\n            }}\r\n          />\r\n          <TextField\r\n            id=\"category\"\r\n            label=\"Category\"\r\n            value={ticket.category}\r\n            onChange={(e) => {\r\n              setTicket({ ...ticket, category: e.target.value });\r\n            }}\r\n          />\r\n          <TextField\r\n            id=\"state\"\r\n            label=\"State\"\r\n            value={ticket.state}\r\n            onChange={(e) => {\r\n              setTicket({ ...ticket, state: e.target.value });\r\n            }}\r\n          />\r\n          <TextField\r\n            id=\"summary\"\r\n            label=\"Summary\"\r\n            value={ticket.summary}\r\n            onChange={(e) => {\r\n              setTicket({ ...ticket, summary: e.target.value });\r\n            }}\r\n          />\r\n          <TextField\r\n            id=\"causingCI\"\r\n            label=\"Causing CI\"\r\n            value={ticket.causingCI}\r\n            onChange={(e) => {\r\n              setTicket({ ...ticket, causingCI: e.target.value });\r\n            }}\r\n          />\r\n          <TextField\r\n            id=\"assignedTo\"\r\n            label=\"Assigned to\"\r\n            value={ticket.assignedTo}\r\n            onChange={(e) => {\r\n              setTicket({ ...ticket, assignedTo: e.target.value });\r\n            }}\r\n          />\r\n          <TextField\r\n            id=\"openDate\"\r\n            label=\"Open date\"\r\n            value={ticket.openDate}\r\n            helperText=\"AAAA-MM-DD\"\r\n            onChange={(e) => {\r\n              setTicket({ ...ticket, openDate: e.target.value });\r\n            }}\r\n          />\r\n          <TextField\r\n            id=\"assignedDate\"\r\n            label=\"Assigned date\"\r\n            value={ticket.assignedDate}\r\n            helperText=\"AAAA-MM-DD\"\r\n            onChange={(e) => {\r\n              setTicket({ ...ticket, assignedDate: e.target.value });\r\n            }}\r\n          />\r\n          <TextField\r\n            id=\"resolutionDate\"\r\n            label=\"Resolution date\"\r\n            value={ticket.resolutionDate}\r\n            helperText=\"AAAA-MM-DD\"\r\n            onChange={(e) => {\r\n              setTicket({ ...ticket, resolutionDate: e.target.value });\r\n            }}\r\n          />\r\n          <TextField\r\n            id=\"closedDate\"\r\n            label=\"Closed date\"\r\n            value={ticket.closedDate}\r\n            helperText=\"AAAA-MM-DD\"\r\n            onChange={(e) => {\r\n              setTicket({ ...ticket, closedDate: e.target.value });\r\n            }}\r\n          />\r\n          <TextField\r\n            id=\"scalationDate\"\r\n            label=\"Scalation date\"\r\n            value={ticket.scalationDate}\r\n            helperText=\"AAAA-MM-DD\"\r\n            onChange={(e) => {\r\n              setTicket({ ...ticket, scalationDate: e.target.value });\r\n            }}\r\n          />\r\n          <TextField\r\n            id=\"notes\"\r\n            label=\"Notes\"\r\n            value={ticket.notes}\r\n            onChange={(e) => {\r\n              setTicket({ ...ticket, notes: e.target.value });\r\n            }}\r\n          />\r\n        </div>\r\n        <div>\r\n          <Button\r\n            variant=\"contained\"\r\n            color=\"primary\"\r\n            type=\"submit\"\r\n            startIcon={<SaveIcon />}\r\n          >\r\n            Save\r\n          </Button>\r\n        </div>\r\n      </form>\r\n    </React.Fragment>\r\n  );\r\n}\r\n"]},"metadata":{},"sourceType":"module"}